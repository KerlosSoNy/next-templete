'use client';
import { useAppearance } from '@/utils/hooks/useApperance';
import React, { useEffect, useState } from 'react';

const DarkModeToggle: React.FC = () => {
    const { appearance,
        // updateAppearance
    } = useAppearance();
    const [isReady, setIsReady] = useState(false);
    const [darkMode,] = useState(false);

    useEffect(() => {
        // Calculate initial state immediately
        // const calculateDarkMode = () => {
        //     if (appearance === 'system') {
        //         return window.matchMedia('(prefers-color-scheme: dark)').matches;
        //     }
        //     return appearance === 'dark';
        // };

        // setDarkMode(calculateDarkMode());

        // Only enable transitions after initial render
        const timer = setTimeout(() => setIsReady(true), 50);

        return () => clearTimeout(timer);
    }, [appearance]);

    const toggleDarkMode = () => {
        // updateAppearance(darkMode ? 'light' : 'dark');
    };

    return (
        <button
            onClick={toggleDarkMode}
            disabled
            className={`relative md:mx-3 w-[42px] h-[24px]  rounded-full ${isReady ? 'transition-colors duration-300' : 'transition-none'
                } ${darkMode ? 'bg-gray-500' : 'bg-gradient-to-l from-[#F0F0F0] to-[#E0E0E0]'
                }`}
            aria-label={darkMode ? 'Switch to light mode' : 'Switch to dark mode'}
        >
            <span
                className={`shadow-[0px_2.5238096714019775px_6.3095245361328125px_0px_rgba(0,0,0,0.20)] absolute end-[1.5] top-[1.5px] h-5  w-5  rounded-full flex items-center justify-center ${isReady ? 'transition-all duration-300' : 'transition-none'
                    } ${darkMode ? 'start-[16px]  bg-white' : 'start-[4px] bg-white'
                    }`}
            >
                <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_1773_5459)">
                        <path d="M5.42871 3.01897C5.54267 3.01897 5.65196 2.9737 5.73255 2.89311C5.81313 2.81253 5.8584 2.70324 5.8584 2.58928V1.65178C5.8584 1.53782 5.81313 1.42853 5.73255 1.34794C5.65196 1.26736 5.54267 1.22209 5.42871 1.22209C5.31475 1.22209 5.20546 1.26736 5.12488 1.34794C5.04429 1.42853 4.99902 1.53782 4.99902 1.65178V2.58928C4.99902 2.70324 5.04429 2.81253 5.12488 2.89311C5.20546 2.9737 5.31475 3.01897 5.42871 3.01897ZM5.42871 10.2065C5.54267 10.2065 5.65196 10.1612 5.73255 10.0806C5.81313 10 5.8584 9.89074 5.8584 9.77678V8.83928C5.8584 8.72532 5.81313 8.61603 5.73255 8.53544C5.65196 8.45486 5.54267 8.40959 5.42871 8.40959C5.31475 8.40959 5.20546 8.45486 5.12488 8.53544C5.04429 8.61603 4.99902 8.72532 4.99902 8.83928V9.77678C4.99902 9.89074 5.04429 10 5.12488 10.0806C5.20546 10.1612 5.31475 10.2065 5.42871 10.2065ZM3.21895 3.9342C3.30391 3.93419 3.38696 3.90899 3.45761 3.86179C3.52826 3.81458 3.58332 3.7475 3.61585 3.669C3.64837 3.59051 3.6569 3.50414 3.64035 3.4208C3.62379 3.33747 3.58291 3.26091 3.52285 3.2008L2.85996 2.53791C2.77903 2.45908 2.6703 2.4153 2.55732 2.41604C2.44435 2.41679 2.33621 2.462 2.25632 2.54189C2.17643 2.62178 2.13122 2.72991 2.13048 2.84289C2.12973 2.95587 2.17351 3.0646 2.25234 3.14553L2.91523 3.80842C2.95508 3.84835 3.00242 3.88002 3.05454 3.90161C3.10666 3.92319 3.16253 3.93427 3.21895 3.9342ZM8.30137 9.01662C8.38636 9.01661 8.46943 8.9914 8.54009 8.94417C8.61075 8.89694 8.66581 8.82982 8.69832 8.7513C8.73083 8.67277 8.73933 8.58637 8.72273 8.50302C8.70613 8.41967 8.66519 8.34311 8.60508 8.28303L7.94219 7.62014C7.90248 7.57937 7.85508 7.5469 7.80272 7.52461C7.75037 7.50232 7.69411 7.49064 7.63721 7.49027C7.5803 7.48989 7.52389 7.50082 7.47125 7.52243C7.41861 7.54403 7.37078 7.57587 7.33054 7.61611C7.29031 7.65635 7.25846 7.70418 7.23686 7.75682C7.21526 7.80946 7.20432 7.86587 7.2047 7.92277C7.20507 7.97968 7.21675 8.03594 7.23904 8.08829C7.26134 8.14065 7.29381 8.18805 7.33457 8.22776L7.99746 8.89065C8.03732 8.93063 8.08469 8.96234 8.13684 8.98396C8.189 9.00558 8.24491 9.01668 8.30137 9.01662ZM1.36621 6.14397H2.30371C2.41767 6.14397 2.52696 6.0987 2.60755 6.01811C2.68813 5.93753 2.7334 5.82824 2.7334 5.71428C2.7334 5.60032 2.68813 5.49103 2.60755 5.41044C2.52696 5.32986 2.41767 5.28459 2.30371 5.28459H1.36621C1.25225 5.28459 1.14296 5.32986 1.06238 5.41044C0.981794 5.49103 0.936523 5.60032 0.936523 5.71428C0.936523 5.82824 0.981794 5.93753 1.06238 6.01811C1.14296 6.0987 1.25225 6.14397 1.36621 6.14397ZM8.55371 6.14397H9.49121C9.60517 6.14397 9.71446 6.0987 9.79505 6.01811C9.87563 5.93753 9.9209 5.82824 9.9209 5.71428C9.9209 5.60032 9.87563 5.49103 9.79505 5.41044C9.71446 5.32986 9.60517 5.28459 9.49121 5.28459H8.55371C8.43975 5.28459 8.33046 5.32986 8.24988 5.41044C8.16929 5.49103 8.12402 5.60032 8.12402 5.71428C8.12402 5.82824 8.16929 5.93753 8.24988 6.01811C8.33046 6.0987 8.43975 6.14397 8.55371 6.14397ZM2.55605 9.01662C2.61251 9.01668 2.66842 9.00558 2.72058 8.98396C2.77273 8.96234 2.8201 8.93063 2.85996 8.89065L3.52285 8.22776C3.60168 8.14682 3.64546 8.0381 3.64472 7.92512C3.64398 7.81214 3.59877 7.704 3.51888 7.62411C3.43899 7.54422 3.33085 7.49901 3.21787 7.49827C3.10489 7.49753 2.99617 7.54131 2.91523 7.62014L2.25234 8.28303C2.19223 8.34311 2.15129 8.41967 2.13469 8.50302C2.1181 8.58637 2.12659 8.67277 2.1591 8.7513C2.19161 8.82982 2.24667 8.89694 2.31733 8.94417C2.38799 8.9914 2.47107 9.01661 2.55605 9.01662ZM7.63848 3.9342C7.6949 3.93431 7.75078 3.92325 7.8029 3.90167C7.85503 3.88008 7.90237 3.84839 7.94219 3.80842L8.60508 3.14553C8.68391 3.0646 8.72769 2.95587 8.72695 2.84289C8.7262 2.72991 8.68099 2.62178 8.6011 2.54189C8.52121 2.462 8.41308 2.41679 8.3001 2.41604C8.18712 2.4153 8.0784 2.45908 7.99746 2.53791L7.33457 3.2008C7.27452 3.26091 7.23363 3.33747 7.21707 3.4208C7.20052 3.50414 7.20905 3.59051 7.24157 3.669C7.2741 3.7475 7.32917 3.81458 7.39981 3.86179C7.47046 3.90899 7.55351 3.93419 7.63848 3.9342ZM5.42871 7.70647C5.82273 7.70647 6.2079 7.58963 6.53551 7.37072C6.86312 7.15182 7.11847 6.84068 7.26925 6.47666C7.42004 6.11263 7.45949 5.71207 7.38262 5.32562C7.30575 4.93918 7.11601 4.5842 6.8374 4.30559C6.55879 4.02698 6.20381 3.83724 5.81737 3.76037C5.43092 3.6835 5.03036 3.72295 4.66633 3.87374C4.30231 4.02452 3.99117 4.27987 3.77227 4.60748C3.55336 4.93509 3.43652 5.32026 3.43652 5.71428C3.43714 6.24245 3.64723 6.74881 4.02071 7.12228C4.39418 7.49576 4.90054 7.70585 5.42871 7.70647Z" fill="#52535F" />
                    </g>
                    <defs>
                        <clipPath id="clip0_1773_5459">
                            <rect width="10" height="10" fill="white" transform="matrix(-1 0 0 1 10.4287 0.714279)" />
                        </clipPath>
                    </defs>
                </svg>
            </span>
        </button>
    );
};

export default DarkModeToggle;